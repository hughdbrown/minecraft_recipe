<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Bedrock Recipe Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <link rel="stylesheet" href="minecraft_recipe.css">
</head>
<body>
    <div class="app-container">
        <!-- Left Navigation Panel -->
        <div class="nav-panel">
            <button class="nav-button active" onclick="switchScreen(0)">Recipe Maker</button>
            <button class="nav-button" onclick="switchScreen(1)">Edit MCADDON Files</button>
            <button class="nav-button" onclick="switchScreen(2)">Combine MCADDON Files</button>
            <button class="nav-button" onclick="switchScreen(3)">Diff MCADDON Files</button>
            <button class="nav-button" onclick="switchScreen(4)">Validate MCADDON</button>
            <button class="nav-button" onclick="switchScreen(5)">Builtin Features</button>
            <button class="nav-button" onclick="switchScreen(6)">Edit PNGs</button>
            <button class="nav-button" onclick="switchScreen(7)">Edit Blocks/Items</button>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Screen 1: Recipe Maker -->
            <div class="screen active" id="screen-recipe">
                <div class="container">
                    <div class="header">
                        <h1>Minecraft Bedrock Recipe Generator</h1>
                        <p>Convert recipe text files to JSON format for Minecraft Bedrock edition</p>
                    </div>

                    <!-- View Toggle (Text/Grid) -->
                    <div class="view-toggle-container">
                        <button class="view-toggle-btn active" id="textViewBtn" onclick="switchRecipeView('text')">
                            üìù Text View
                        </button>
                        <button class="view-toggle-btn" id="gridViewBtn" onclick="switchRecipeView('grid')">
                            ‚öôÔ∏è Grid View
                        </button>
                    </div>

                    <div class="tabs">
                        <button class="tab active" onclick="switchRecipeTab(0)">JSON Only</button>
                        <button class="tab" onclick="switchRecipeTab(1)">JSON + McAddon</button>
                    </div>

                    <!-- Tab 1: JSON Only -->
                    <div class="tab-content active" id="tab1">
                        <!-- Text View -->
                        <div class="recipe-text-view" id="tab1-text-view">
                            <div class="info-box">
                                <strong>Tab 1: Convert Recipe to JSON</strong>
                                Select a .txt recipe file to convert it to JSON format. The JSON file will be downloaded to your Downloads folder.
                            </div>

                            <div class="form-group">
                                <label for="txtFile1">Select Recipe File (.txt)</label>
                                <input type="file" id="txtFile1" accept=".txt" onchange="handleFileSelect(1)">
                                <div class="file-info" id="fileInfo1"></div>
                            </div>

                            <button class="convert-btn" id="convertBtn1" onclick="convertToJson()" disabled>
                                Convert to JSON
                            </button>

                            <div class="result" id="result1"></div>
                        </div>

                        <!-- Grid View -->
                        <div class="recipe-grid-view" id="tab1-grid-view" style="display: none;">
                            <div class="info-box">
                                <strong>Tab 1: Create Recipe with Grid</strong>
                                Select items in the 3x3 crafting grid below, choose a result item, and convert to JSON format.
                            </div>

                            <div class="grid-container">
                                <h3>Crafting Grid</h3>
                                <div class="crafting-grid" id="craftingGrid1">
                                    <!-- 3x3 grid cells will be generated by JavaScript -->
                                </div>

                                <h3>Result Item</h3>
                                <div class="result-grid">
                                    <div class="grid-cell result-cell" id="resultCell1">
                                        <div class="cell-display" onclick="openItemSelector('result', 1)">
                                            <span class="cell-placeholder">Click to select result</span>
                                        </div>
                                    </div>
                                    <div class="form-group" style="margin-left: 20px;">
                                        <label for="resultCount1">Result Count</label>
                                        <input type="number" id="resultCount1" value="1" min="1" max="64" class="count-input">
                                    </div>
                                </div>

                                <div class="grid-actions">
                                    <button class="convert-btn" onclick="clearGrid(1)" style="background: #95a5a6;">
                                        Clear Grid
                                    </button>
                                    <button class="convert-btn" id="convertGridBtn1" onclick="convertGridToJson(1)">
                                        Convert to JSON
                                    </button>
                                </div>
                            </div>

                            <div class="result" id="gridResult1"></div>
                        </div>
                    </div>

                    <!-- Tab 2: JSON + McAddon -->
                    <div class="tab-content" id="tab2">
                        <!-- Text View -->
                        <div class="recipe-text-view" id="tab2-text-view">
                            <div class="info-box">
                                <strong>Tab 2: Convert Recipe and Create McAddon</strong>
                                Select a .txt recipe file and a base .mcaddon file. The recipe will be converted to JSON and injected into the .mcaddon package.
                            </div>

                            <div class="form-group">
                                <label for="txtFile2">Select Recipe File (.txt)</label>
                                <input type="file" id="txtFile2" accept=".txt" onchange="handleFileSelect(2)">
                                <div class="file-info" id="fileInfo2"></div>
                            </div>

                            <div class="form-group">
                                <label for="mcaddonFile">Select Base McAddon File (.mcaddon)</label>
                                <input type="file" id="mcaddonFile" accept=".mcaddon" onchange="handleMcAddonSelect()">
                                <div class="file-info" id="mcaddonInfo"></div>
                            </div>

                            <button class="convert-btn" id="convertBtn2" onclick="convertAndInject()" disabled>
                                Convert & Create McAddon
                            </button>

                            <div class="result" id="result2"></div>
                        </div>

                        <!-- Grid View -->
                        <div class="recipe-grid-view" id="tab2-grid-view" style="display: none;">
                            <div class="info-box">
                                <strong>Tab 2: Create Recipe with Grid + McAddon</strong>
                                Load an MCADDON file to access custom items, then create your recipe using the grid.
                            </div>

                            <div class="form-group">
                                <label for="mcaddonFileGrid">Select Base McAddon File (.mcaddon)</label>
                                <input type="file" id="mcaddonFileGrid" accept=".mcaddon" onchange="handleMcAddonGridSelect()">
                                <div class="file-info" id="mcaddonGridInfo"></div>
                            </div>

                            <div class="grid-container">
                                <h3>Crafting Grid</h3>
                                <div class="crafting-grid" id="craftingGrid2">
                                    <!-- 3x3 grid cells will be generated by JavaScript -->
                                </div>

                                <h3>Result Item</h3>
                                <div class="result-grid">
                                    <div class="grid-cell result-cell" id="resultCell2">
                                        <div class="cell-display" onclick="openItemSelector('result', 2)">
                                            <span class="cell-placeholder">Click to select result</span>
                                        </div>
                                    </div>
                                    <div class="form-group" style="margin-left: 20px;">
                                        <label for="resultCount2">Result Count</label>
                                        <input type="number" id="resultCount2" value="1" min="1" max="64" class="count-input">
                                    </div>
                                </div>

                                <div class="grid-actions">
                                    <button class="convert-btn" onclick="clearGrid(2)" style="background: #95a5a6;">
                                        Clear Grid
                                    </button>
                                    <button class="convert-btn" id="convertGridBtn2" onclick="convertGridToJson(2)">
                                        Convert & Create McAddon
                                    </button>
                                </div>
                            </div>

                            <div class="result" id="gridResult2"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Screen 2: MCADDON Editor -->
            <div class="screen" id="screen-mcaddon">
                <div class="container">
                    <div class="header">
                        <h1>MCADDON File Editor</h1>
                        <p>Edit JSON files inside MCADDON packages</p>
                    </div>

                    <div class="workflow-tabs">
                        <button class="workflow-tab active enabled" onclick="switchWorkflowTab(0)">1. Select File</button>
                        <button class="workflow-tab" id="workflow-tab-1" onclick="switchWorkflowTab(1)">2. Choose JSON</button>
                        <button class="workflow-tab" id="workflow-tab-2" onclick="switchWorkflowTab(2)">3. Edit JSON</button>
                    </div>

                    <!-- Workflow Tab 1: File Selection -->
                    <div class="workflow-tab-content active" id="workflow-content-0">
                        <div class="info-box">
                            <strong>Step 1: Select MCADDON File</strong>
                            Choose a .mcaddon file to edit. Once loaded, you'll see all JSON files contained within it.
                        </div>

                        <div class="form-group">
                            <label for="mcaddonEditorFile">Select MCADDON File (.mcaddon)</label>
                            <input type="file" id="mcaddonEditorFile" accept=".mcaddon" onchange="handleMcAddonEditorSelect()">
                            <div class="file-info" id="mcaddonEditorInfo"></div>
                        </div>

                        <div class="result" id="mcaddon-result"></div>
                    </div>

                    <!-- Workflow Tab 2: JSON File List -->
                    <div class="workflow-tab-content" id="workflow-content-1">
                        <div class="info-box">
                            <strong>Step 2: Select JSON File to Edit</strong>
                            Click on any JSON file below to edit it.
                        </div>

                        <div id="json-file-list-container">
                            <ul class="json-file-list" id="jsonFileList"></ul>
                        </div>
                    </div>

                    <!-- Workflow Tab 3: JSON Editor -->
                    <div class="workflow-tab-content" id="workflow-content-2">
                        <div class="json-editor-container">
                            <div class="editor-header">
                                <span class="file-name" id="currentFileName"></span>
                                <button class="back-btn" onclick="backToFileList()">‚Üê Back to File List</button>
                            </div>

                            <div id="validationError" class="validation-error" style="display: none;"></div>

                            <textarea class="json-textarea" id="jsonEditor" placeholder="JSON content will appear here..."></textarea>

                            <div class="editor-actions">
                                <button class="format-btn" onclick="formatJson()">Format JSON</button>
                                <button class="save-btn" onclick="saveModifiedMcAddon()">Save & Download MCADDON</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Screen 3: Combine MCADDON Files -->
            <div class="screen" id="screen-combine">
                <div class="container">
                    <div class="header">
                        <h1>Combine MCADDON Files</h1>
                        <p>Merge two MCADDON files by adding content from source to destination</p>
                    </div>

                    <div class="tab-content active" style="display: block;">
                        <div class="info-box">
                            <strong>How it works:</strong>
                            Select a source and destination MCADDON file. Files and keys from the source that don't exist in the destination will be added. Existing content in the destination will not be modified.
                        </div>

                        <div class="form-group">
                            <label for="combineSourceFile">Select Source MCADDON File</label>
                            <input type="file" id="combineSourceFile" accept=".mcaddon" onchange="handleCombineFileSelect('source')">
                            <div class="file-info" id="combineSourceInfo"></div>
                        </div>

                        <div class="form-group">
                            <label for="combineDestFile">Select Destination MCADDON File</label>
                            <input type="file" id="combineDestFile" accept=".mcaddon" onchange="handleCombineFileSelect('dest')">
                            <div class="file-info" id="combineDestInfo"></div>
                        </div>

                        <button class="convert-btn" id="combineBtn" onclick="combineMcAddonFiles()" disabled>
                            Combine Files
                        </button>

                        <div class="result" id="combineResult"></div>

                        <button class="convert-btn" id="downloadCombinedBtn" onclick="downloadCombinedMcAddon()" style="display: none; margin-top: 15px; background: #27ae60;">
                            Download Combined MCADDON
                        </button>
                    </div>
                </div>
            </div>

            <!-- Screen 4: Diff MCADDON Files -->
            <div class="screen" id="screen-diff">
                <div class="container">
                    <div class="header">
                        <h1>Diff MCADDON Files</h1>
                        <p>Compare two MCADDON files to see what changed</p>
                    </div>

                    <div class="tab-content active" style="display: block;">
                        <div class="info-box">
                            <strong>How it works:</strong>
                            Select two versions of an MCADDON file. The tool will compare all JSON files and show you what's different between them.
                        </div>

                        <div class="form-group">
                            <label for="diffFile1">Select First MCADDON File (Version 1)</label>
                            <input type="file" id="diffFile1" accept=".mcaddon" onchange="handleDiffFileSelect('file1')">
                            <div class="file-info" id="diffFile1Info"></div>
                        </div>

                        <div class="form-group">
                            <label for="diffFile2">Select Second MCADDON File (Version 2)</label>
                            <input type="file" id="diffFile2" accept=".mcaddon" onchange="handleDiffFileSelect('file2')">
                            <div class="file-info" id="diffFile2Info"></div>
                        </div>

                        <button class="convert-btn" id="diffBtn" onclick="diffMcAddonFiles()" disabled>
                            Compare Files
                        </button>

                        <div class="result" id="diffResult"></div>

                        <div id="diffDisplay" style="display: none; margin-top: 25px;">
                            <div id="diffSummary" style="margin-bottom: 20px;"></div>
                            <div id="diffOnlyInFile1"></div>
                            <div id="diffOnlyInFile2"></div>
                            <div id="diffModified"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Screen 5: Validate MCADDON -->
            <div class="screen" id="screen-validate">
                <div class="container">
                    <div class="header">
                        <h1>Validate MCADDON File</h1>
                        <p>Check MCADDON files for errors and anomalies</p>
                    </div>

                    <div class="tab-content active" style="display: block;">
                        <div class="info-box">
                            <strong>Automatic Validation:</strong>
                            Select an MCADDON file and it will be automatically validated. The tool checks for mandatory structure, proper JSON formatting, display names, and potential issues.
                        </div>

                        <div class="form-group">
                            <label for="validateFile">Select MCADDON File (.mcaddon)</label>
                            <input type="file" id="validateFile" accept=".mcaddon" onchange="handleValidateFileSelect()">
                            <div class="file-info" id="validateFileInfo"></div>
                        </div>

                        <div id="validationResults" style="display: none; margin-top: 25px;">
                            <div id="validationSummary"></div>
                            <div id="validationErrors"></div>
                            <div id="validationWarnings"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Screen 6: Builtin Features -->
            <div class="screen" id="screen-builtin">
                <div class="container">
                    <div class="header">
                        <h1>Builtin Features</h1>
                        <p>Apply builtin features to items in MCADDON files</p>
                    </div>

                    <div class="tab-content active" style="display: block;">
                        <!-- Step 1: Select Builtin Feature -->
                        <div id="builtin-feature-selector" class="builtin-section">
                            <div class="info-box">
                                <strong>Step 1: Select a Builtin Feature</strong>
                                Choose which feature you want to apply to your items.
                            </div>
                            <div id="builtinFeatureList" class="builtin-feature-list"></div>
                        </div>

                        <!-- Step 2: Select MCADDON File -->
                        <div id="builtin-file-selector" class="builtin-section" style="display: none;">
                            <div class="info-box">
                                <strong>Step 2: Select MCADDON File</strong>
                                Choose the MCADDON file containing items to modify.
                            </div>
                            <div class="form-group">
                                <label for="builtinMcAddonFile">Select MCADDON File (.mcaddon)</label>
                                <input type="file" id="builtinMcAddonFile" accept=".mcaddon" onchange="handleBuiltinMcAddonSelect()">
                                <div class="file-info" id="builtinFileInfo"></div>
                            </div>
                        </div>

                        <!-- Step 3: Select Item -->
                        <div id="builtin-item-selector" class="builtin-section" style="display: none;">
                            <div class="info-box">
                                <strong>Step 3: Select Item</strong>
                                Choose an item to apply the feature to.
                            </div>
                            <div id="builtinItemList" class="builtin-item-list"></div>
                        </div>

                        <!-- Step 4: Configure Feature -->
                        <div id="builtin-feature-config" class="builtin-section" style="display: none;">
                            <div class="info-box">
                                <strong>Step 4: Configure Feature</strong>
                                Add and configure the feature properties.
                            </div>

                            <div id="selectedItemInfo" class="selected-item-info"></div>

                            <div id="foodEffectsContainer" style="display: none;">
                                <div class="food-effects-header">
                                    <h3>Food Effects</h3>
                                    <button class="add-effect-btn" onclick="addFoodEffect()">+ Add Effect</button>
                                </div>
                                <div id="foodEffectsList" class="food-effects-list"></div>

                                <div class="builtin-actions">
                                    <button class="convert-btn" id="submitBuiltinBtn" onclick="submitBuiltinFeature()" style="margin-top: 20px;">
                                        Submit
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Download Button -->
                        <button class="convert-btn" id="downloadBuiltinBtn" onclick="downloadBuiltinMcAddon()" style="display: none; margin-top: 15px; background: #27ae60;">
                            Download Modified MCADDON
                        </button>
                    </div>
                </div>
            </div>

            <!-- Screen 6: Edit PNGs -->
            <div class="screen" id="screen-png">
                <div class="container">
                    <div class="header">
                        <h1>Edit PNG Files</h1>
                        <p>Delete, add, replace, or download PNG files within MCADDON packages</p>
                    </div>

                    <div class="tab-content active" style="display: block;">
                        <!-- Step 1: Select MCADDON File -->
                        <div id="png-file-selector" class="png-section">
                            <div class="info-box">
                                <strong>Step 1: Select MCADDON File</strong>
                                Choose a .mcaddon file to work with PNG files.
                            </div>
                            <div class="form-group">
                                <label for="pngMcAddonFile">Select MCADDON File (.mcaddon)</label>
                                <input type="file" id="pngMcAddonFile" accept=".mcaddon" onchange="handlePngMcAddonSelect()">
                                <div class="file-info" id="pngFileInfo"></div>
                            </div>
                        </div>

                        <!-- Step 2: Choose Operation -->
                        <div id="png-operation-selector" class="png-section" style="display: none;">
                            <div class="info-box">
                                <strong>Step 2: Choose Operation</strong>
                                Select what you want to do with PNG files.
                            </div>
                            <div class="png-operation-grid">
                                <button class="png-operation-btn" onclick="selectPngOperation('delete')">
                                    <div class="operation-icon">üóëÔ∏è</div>
                                    <div class="operation-title">Delete PNG</div>
                                    <div class="operation-desc">Remove a PNG file from the MCADDON</div>
                                </button>
                                <button class="png-operation-btn" onclick="selectPngOperation('add')">
                                    <div class="operation-icon">‚ûï</div>
                                    <div class="operation-title">Add PNG</div>
                                    <div class="operation-desc">Add a PNG file to a folder in the MCADDON</div>
                                </button>
                                <button class="png-operation-btn" onclick="selectPngOperation('replace')">
                                    <div class="operation-icon">üîÑ</div>
                                    <div class="operation-title">Replace PNG</div>
                                    <div class="operation-desc">Replace an existing PNG file</div>
                                </button>
                                <button class="png-operation-btn" onclick="selectPngOperation('download')">
                                    <div class="operation-icon">‚¨áÔ∏è</div>
                                    <div class="operation-title">Download PNG</div>
                                    <div class="operation-desc">Extract a PNG file from the MCADDON</div>
                                </button>
                            </div>
                        </div>

                        <!-- Step 3: Delete PNG -->
                        <div id="png-delete-section" class="png-section" style="display: none;">
                            <div class="info-box">
                                <strong>Delete PNG File</strong>
                                Select a PNG file to delete from the MCADDON.
                            </div>
                            <div class="png-browser-container">
                                <ul class="png-file-list" id="pngDeleteList"></ul>
                            </div>
                            <div id="deleteConfirmSection" style="display: none; margin-top: 20px;">
                                <div class="selected-item-info">
                                    <h4>Selected for deletion:</h4>
                                    <p id="deleteSelectedPath"></p>
                                </div>
                                <button class="convert-btn" onclick="confirmDeletePng()" style="background: #e74c3c;">
                                    Confirm Delete
                                </button>
                                <button class="convert-btn" onclick="cancelPngOperation()" style="background: #95a5a6; margin-left: 10px;">
                                    Cancel
                                </button>
                            </div>
                        </div>

                        <!-- Step 3: Add PNG -->
                        <div id="png-add-section" class="png-section" style="display: none;">
                            <div class="info-box">
                                <strong>Add PNG File</strong>
                                Step 1: Select a PNG file from your computer. Step 2: Choose destination folder in MCADDON.
                            </div>
                            <div class="form-group">
                                <label for="addPngLocalFile">Select PNG File from Computer</label>
                                <input type="file" id="addPngLocalFile" accept=".png" onchange="handleAddPngLocalSelect()">
                                <div class="file-info" id="addPngLocalInfo"></div>
                            </div>
                            <div id="addPngBrowserSection" style="display: none;">
                                <div class="info-box" style="margin-top: 20px;">
                                    <strong>Select Destination Folder</strong>
                                    Click on a folder to select it as the destination.
                                </div>
                                <div class="png-browser-container">
                                    <ul class="png-file-list" id="pngAddFolderList"></ul>
                                </div>
                                <div id="addConfirmSection" style="display: none; margin-top: 20px;">
                                    <div class="selected-item-info">
                                        <h4>Will add to folder:</h4>
                                        <p id="addSelectedPath"></p>
                                    </div>
                                    <button class="convert-btn" onclick="confirmAddPng()">
                                        Confirm Add
                                    </button>
                                    <button class="convert-btn" onclick="cancelPngOperation()" style="background: #95a5a6; margin-left: 10px;">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Step 3: Replace PNG -->
                        <div id="png-replace-section" class="png-section" style="display: none;">
                            <div class="info-box">
                                <strong>Replace PNG File</strong>
                                Step 1: Select a PNG file from your computer. Step 2: Choose which PNG to replace in MCADDON.
                            </div>
                            <div class="form-group">
                                <label for="replacePngLocalFile">Select PNG File from Computer</label>
                                <input type="file" id="replacePngLocalFile" accept=".png" onchange="handleReplacePngLocalSelect()">
                                <div class="file-info" id="replacePngLocalInfo"></div>
                            </div>
                            <div id="replacePngBrowserSection" style="display: none;">
                                <div class="info-box" style="margin-top: 20px;">
                                    <strong>Select PNG File to Replace</strong>
                                    Navigate folders and click on a PNG file to replace it.
                                </div>
                                <div class="png-browser-container">
                                    <ul class="png-file-list" id="pngReplaceList"></ul>
                                </div>
                                <div id="replaceConfirmSection" style="display: none; margin-top: 20px;">
                                    <div class="selected-item-info">
                                        <h4>Will replace file:</h4>
                                        <p id="replaceSelectedPath"></p>
                                    </div>
                                    <button class="convert-btn" onclick="confirmReplacePng()">
                                        Confirm Replace
                                    </button>
                                    <button class="convert-btn" onclick="cancelPngOperation()" style="background: #95a5a6; margin-left: 10px;">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Step 3: Download PNG -->
                        <div id="png-download-section" class="png-section" style="display: none;">
                            <div class="info-box">
                                <strong>Download PNG File</strong>
                                Select a PNG file to extract from the MCADDON.
                            </div>
                            <div class="png-browser-container">
                                <ul class="png-file-list" id="pngDownloadList"></ul>
                            </div>
                            <div id="downloadPngConfirmSection" style="display: none; margin-top: 20px;">
                                <div class="selected-item-info">
                                    <h4>Selected for download:</h4>
                                    <p id="downloadSelectedPath"></p>
                                </div>
                                <button class="convert-btn" onclick="confirmDownloadPng()">
                                    Confirm Download
                                </button>
                                <button class="convert-btn" onclick="cancelPngOperation()" style="background: #95a5a6; margin-left: 10px;">
                                    Cancel
                                </button>
                            </div>
                        </div>

                        <!-- Download Modified MCADDON Button -->
                        <button class="convert-btn" id="downloadModifiedMcAddonBtn" onclick="downloadModifiedPngMcAddon()" style="display: none; margin-top: 15px; background: #27ae60;">
                            Download Modified MCADDON
                        </button>
                    </div>
                </div>
            </div>

            <!-- Screen 7: Edit Blocks/Items -->
            <div class="screen" id="screen-edit-blocks-items">
                <div class="container">
                    <div class="header">
                        <h1>Edit Blocks and Items</h1>
                        <p>Modify display names, identifiers, or delete blocks and items in MCADDON files</p>
                    </div>

                    <div class="tab-content active" style="display: block;">
                        <!-- Step 1: Select MCADDON File -->
                        <div id="edit-blocks-items-file-selector" class="edit-blocks-items-section">
                            <div class="info-box">
                                <strong>Step 1: Select MCADDON File</strong>
                                Choose a .mcaddon file to edit its blocks and items.
                            </div>
                            <div class="form-group">
                                <label for="editBlocksItemsFile">Select MCADDON File (.mcaddon)</label>
                                <input type="file" id="editBlocksItemsFile" accept=".mcaddon" onchange="handleEditBlocksItemsFileSelect()">
                                <div class="file-info" id="editBlocksItemsFileInfo"></div>
                            </div>
                        </div>

                        <!-- Step 2: Edit Items and Blocks -->
                        <div id="edit-blocks-items-editor" class="edit-blocks-items-section" style="display: none;">
                            <div class="info-box">
                                <strong>Step 2: Edit Items and Blocks</strong>
                                Edit display names and identifiers, or delete items and blocks. All changes will be saved when you download the modified MCADDON.
                            </div>

                            <!-- Items Section -->
                            <div class="edit-blocks-items-category">
                                <h3>Items</h3>
                                <div id="itemsListContainer">
                                    <table class="edit-blocks-items-table">
                                        <thead>
                                            <tr>
                                                <th>Display Name</th>
                                                <th>Identifier</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="itemsTableBody">
                                            <!-- Items will be populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Blocks Section -->
                            <div class="edit-blocks-items-category">
                                <h3>Blocks</h3>
                                <div id="blocksListContainer">
                                    <table class="edit-blocks-items-table">
                                        <thead>
                                            <tr>
                                                <th>Display Name</th>
                                                <th>Identifier</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="blocksTableBody">
                                            <!-- Blocks will be populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Download Modified MCADDON Button -->
                            <button class="convert-btn" id="downloadEditedBlocksItemsBtn" onclick="downloadEditedBlocksItems()" style="display: none; margin-top: 20px; background: #27ae60;">
                                Download Modified MCADDON
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div class="delete-modal" id="deleteConfirmModal" style="display: none;">
            <div class="modal-overlay" onclick="cancelDelete()"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Confirm Deletion</h2>
                    <button class="modal-close" onclick="cancelDelete()">√ó</button>
                </div>
                <div class="modal-body">
                    <p id="deleteConfirmMessage"></p>
                    <div class="modal-actions">
                        <button class="convert-btn" onclick="confirmDelete()" style="background: #e74c3c;">
                            Delete
                        </button>
                        <button class="convert-btn" onclick="cancelDelete()" style="background: #95a5a6; margin-left: 10px;">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Item Selector Modal -->
        <div class="item-selector-modal" id="itemSelectorModal" style="display: none;">
            <div class="modal-overlay" onclick="closeItemSelector()"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Select Item</h2>
                    <button class="modal-close" onclick="closeItemSelector()">√ó</button>
                </div>
                <div class="modal-body">
                    <input type="text" id="itemSearchInput" class="item-search" placeholder="Search items..." oninput="filterItems()">
                    <div class="item-list" id="itemList">
                        <!-- Items will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="minecraft_recipe.js"></script>
</body>
</html>
